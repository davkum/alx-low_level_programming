nested loop for better coding